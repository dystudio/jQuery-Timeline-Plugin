(function(a){a.fn.timeline=function(b){var c=a.extend({left_action:"",left_symbol:"+",right_action:"",right_symbol:"-",use_alternative_position:false,link_is_hash:true,normal_color:"#58595b",hover_color:"#ed145b",auto_detect_active_bullet:true},b);return this.each(function(){var b=c.normal_color;var d=c.hover_color;c.left_symbol=c.left_symbol.substr(0,1);c.right_symbol=c.right_symbol.substr(0,1);var e=c.times;var f=0;a(e).each(function(b,d){if(d.type&&d.type=="separator"){a("#timeline ul").append("<li class='separator'> <span>"+d.text+"</span></li>")}else{var e=[];if(!c.auto_detect_active_bullet&&d.selected||c.auto_detect_active_bullet&&(d.link&&d.link.match(/^#[0-9a-zA-Z\-_:]+$/)&&window.location.hash==d.link||d.link&&!d.link.match(/^#[0-9a-zA-Z\-_:]$/)&&window.location.href==d.link)){e.push("selected")}if(b%2&&c.use_alternative_position)e.push("odd_row");var f="";a(e).each(function(a,b){f+=" "+b});a("#timeline ul").append("<li class='empty'> </li>");a("#timeline ul").append("<li><a "+(f!=""?"class='"+f+"'":"")+" href='"+d.link+"'> </a><span "+(f!=""?"class='"+f+"'":"")+" >"+d.text+"</span></li>")}});a("#timeline ul").prepend("<li id='plus'><a href='"+c.left_action+"'>"+c.left_symbol+"</a></li>");a("#timeline ul").append("<li class='empty'> </li>");a("#timeline ul").append("<li id='minus'><a href='"+c.right_action+"'>"+c.right_symbol+"</a></li>");var g=a("#timeline").width();var h=a("#plus").width();var i=a("#minus").width();var j=a(a("#timeline ul li").find("a")[1]).parent().width();var k=e.length+1;var l=g-(h+i+j*e.length);var m=(l-40)/k;var n=m/g*100;a(".empty").css("width",n+"%");a("#timeline ul li a, #timeline ul li span").bind({mouseover:function(b){a(a(b.target).parent().find("a")).css("background-color",d);a(a(b.target).parent().find("span")).css("color",d)},mouseout:function(c){a(a(c.target).parent().find("a")).css("background-color",b);a(a(c.target).parent().find("span")).css("color",b)},click:function(b){if(c.link_is_hash){window.location.hash=a(a(b.target).parent().find("a")).attr("href")}else{window.location.href=a(a(b.target).parent().find("a")).attr("href")}}})})}})(jQuery)